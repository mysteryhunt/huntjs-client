!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.HuntJSClient=n():e.HuntJSClient=n()}(this,function(){return function(e){function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=0)}([function(e,n,t){"use strict";function o(e,n,t,o){return new Promise(function(r,i){var c=void 0!==o,u=""+e+t;c&&"GET"===n&&(u+="?data="+encodeURIComponent(JSON.stringify(o)));var s=new XMLHttpRequest;s.open(n,u,!0),s.withCredentials=!0,c&&"POST"===n&&s.setRequestHeader("Content-type","application/json"),s.onreadystatechange=function(){if(s.readyState===XMLHttpRequest.DONE)if(s.status>=200&&s.status<300)r(JSON.parse(s.responseText));else{var e=void 0;try{e=JSON.parse(s.responseText).error}catch(n){e=s.responseText}i(new Error(e))}},s.onerror=function(){i(new Error("Could not make network request"))},c&&"POST"===n?s.send(JSON.stringify(o)):s.send(null)})}function r(e){return{get:function(n,t){return o(e,"GET",n,t)},post:function(n,t){return o(e,"POST",n,t)},subscribe:function(n,t){var o=e.replace(/^http/,"ws")+"/huntjs_subscribe?channel="+encodeURIComponent(n),r=new u(o);return r.addEventListener("message",function(e){return t(e.data)}),r}}}function i(e){var n=window.__huntjs__[e];return{get:function(e,t){return n.get(e,t)},post:function(e,t){return n.post(e,t)}}}var c=t(1),u=t(6);window.Promise||(window.Promise=c);var s={connect:function(e,n){return window.__huntjs__&&window.__huntjs__[e]?i(e):r(n)}};e.exports=s},function(e,n,t){"use strict";(function(n){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o){function r(){}function i(e,n){return function(){e.apply(n,arguments)}}function c(e){if("object"!==t(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function u(e,n){for(;3===e._state;)e=e._value;if(0===e._state)return void e._deferreds.push(n);e._handled=!0,c._immediateFn(function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null===t)return void(1===e._state?s:a)(n.promise,e._value);var o;try{o=t(e._value)}catch(e){return void a(n.promise,e)}s(n.promise,o)})}function s(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"===(void 0===n?"undefined":t(n))||"function"==typeof n)){var o=n.then;if(n instanceof c)return e._state=3,e._value=n,void f(e);if("function"==typeof o)return void d(i(o,n),e)}e._state=1,e._value=n,f(e)}catch(n){a(e,n)}}function a(e,n){e._state=2,e._value=n,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&c._immediateFn(function(){e._handled||c._unhandledRejectionFn(e._value)});for(var n=0,t=e._deferreds.length;n<t;n++)u(e,e._deferreds[n]);e._deferreds=null}function l(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}function d(e,n){var t=!1;try{e(function(e){t||(t=!0,s(n,e))},function(e){t||(t=!0,a(n,e))})}catch(e){if(t)return;t=!0,a(n,e)}}var p=setTimeout;c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,n){var t=new this.constructor(r);return u(this,new l(e,n,t)),t},c.all=function(e){var n=Array.prototype.slice.call(e);return new c(function(e,o){function r(c,u){try{if(u&&("object"===(void 0===u?"undefined":t(u))||"function"==typeof u)){var s=u.then;if("function"==typeof s)return void s.call(u,function(e){r(c,e)},o)}n[c]=u,0==--i&&e(n)}catch(e){o(e)}}if(0===n.length)return e([]);for(var i=n.length,c=0;c<n.length;c++)r(c,n[c])})},c.resolve=function(e){return e&&"object"===(void 0===e?"undefined":t(e))&&e.constructor===c?e:new c(function(n){n(e)})},c.reject=function(e){return new c(function(n,t){t(e)})},c.race=function(e){return new c(function(n,t){for(var o=0,r=e.length;o<r;o++)e[o].then(n,t)})},c._immediateFn="function"==typeof n&&function(e){n(e)}||function(e){p(e,0)},c._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},c._setImmediateFn=function(e){c._immediateFn=e},c._setUnhandledRejectionFn=function(e){c._unhandledRejectionFn=e},void 0!==e&&e.exports?e.exports=c:o.Promise||(o.Promise=c)}(void 0)}).call(n,t(2).setImmediate)},function(e,n,t){"use strict";function o(e,n){this._id=e,this._clearFn=n}var r=Function.prototype.apply;n.setTimeout=function(){return new o(r.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new o(r.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,n){clearTimeout(e._idleTimeoutId),e._idleTimeout=n},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var n=e._idleTimeout;n>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},n))},t(3),n.setImmediate=setImmediate,n.clearImmediate=clearImmediate},function(e,n,t){"use strict";(function(e,n){!function(e,t){function o(e){"function"!=typeof e&&(e=new Function(""+e));for(var n=new Array(arguments.length-1),t=0;t<n.length;t++)n[t]=arguments[t+1];var o={callback:e,args:n};return a[s]=o,u(s),s++}function r(e){delete a[e]}function i(e){var n=e.callback,o=e.args;switch(o.length){case 0:n();break;case 1:n(o[0]);break;case 2:n(o[0],o[1]);break;case 3:n(o[0],o[1],o[2]);break;default:n.apply(t,o)}}function c(e){if(f)setTimeout(c,0,e);else{var n=a[e];if(n){f=!0;try{i(n)}finally{r(e),f=!1}}}}if(!e.setImmediate){var u,s=1,a={},f=!1,l=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){u=function(e){n.nextTick(function(){c(e)})}}():function(){if(e.postMessage&&!e.importScripts){var n=!0,t=e.onmessage;return e.onmessage=function(){n=!1},e.postMessage("","*"),e.onmessage=t,n}}()?function(){var n="setImmediate$"+Math.random()+"$",t=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(n)&&c(+t.data.slice(n.length))};e.addEventListener?e.addEventListener("message",t,!1):e.attachEvent("onmessage",t),u=function(t){e.postMessage(n+t,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){c(e.data)},u=function(n){e.port2.postMessage(n)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var e=l.documentElement;u=function(n){var t=l.createElement("script");t.onreadystatechange=function(){c(n),t.onreadystatechange=null,e.removeChild(t),t=null},e.appendChild(t)}}():function(){u=function(e){setTimeout(c,0,e)}}(),d.setImmediate=o,d.clearImmediate=r}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(n,t(4),t(5))},function(e,n,t){"use strict";var o,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o=function(){return this}();try{o=o||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":r(window))&&(o=window)}e.exports=o},function(e,n,t){"use strict";function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===o||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(n){try{return l.call(null,e,0)}catch(n){return l.call(this,e,0)}}}function c(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(n){try{return d.call(null,e)}catch(n){return d.call(this,e)}}}function u(){v&&m&&(v=!1,m.length?h=m.concat(h):y=-1,h.length&&s())}function s(){if(!v){var e=i(u);v=!0;for(var n=h.length;n;){for(m=h,h=[];++y<n;)m&&m[y].run();y=-1,n=h.length}m=null,v=!1,c(e)}}function a(e,n){this.fun=e,this.array=n}function f(){}var l,d,p=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:o}catch(e){l=o}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var m,h=[],v=!1,y=-1;p.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];h.push(new a(e,n)),1!==h.length||v||i(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=f,p.addListener=f,p.once=f,p.off=f,p.removeListener=f,p.removeAllListeners=f,p.emit=f,p.prependListener=f,p.prependOnceListener=f,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,n,t){"use strict";var o=function(e){return e&&2===e.CLOSING},r=function(){return"undefined"!=typeof WebSocket&&o(WebSocket)},i=function(){return{constructor:r()?WebSocket:null,maxReconnectionDelay:1e4,minReconnectionDelay:1500,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,debug:!1}},c=function(e,n,t){Object.defineProperty(n,t,{get:function(){return e[t]},set:function(n){e[t]=n},enumerable:!0,configurable:!0})},u=function(e){return e.minReconnectionDelay+Math.random()*e.minReconnectionDelay},s=function(e,n){var t=n*e.reconnectionDelayGrowFactor;return t>e.maxReconnectionDelay?e.maxReconnectionDelay:t},a=["onopen","onclose","onmessage","onerror"],f=function(e,n,t){Object.keys(t).forEach(function(n){t[n].forEach(function(t){var o=t[0],r=t[1];e.addEventListener(n,o,r)})}),n&&a.forEach(function(t){e[t]=n[t]})},l=function e(n,t,r){var a=this;void 0===r&&(r={});var l,d,p=0,m=0,h=!0,v=null,y={};if(!(this instanceof e))throw new TypeError("Failed to construct 'ReconnectingWebSocket': Please use the 'new' operator");var w=i();if(Object.keys(w).filter(function(e){return r.hasOwnProperty(e)}).forEach(function(e){return w[e]=r[e]}),!o(w.constructor))throw new TypeError("Invalid WebSocket constructor. Set `options.constructor`");var _=w.debug?function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return console.log.apply(console,["RWS:"].concat(e))}:function(){},T=function(e,n){return setTimeout(function(){var t=new Error(n);t.code=e,Array.isArray(y.error)&&y.error.forEach(function(e){return(0,e[0])(t)}),l.onerror&&l.onerror(t)},0)},b=function(){if(_("handleClose",{shouldRetry:h}),m++,_("retries count:",m),m>w.maxRetries)return void T("EHOSTDOWN","Too many failed connection attempts");p=p?s(w,p):u(w),_("handleClose - reconnectDelay:",p),h&&setTimeout(g,p)},g=function(){if(h){_("connect");var e=l,o="function"==typeof n?n():n;l=new w.constructor(o,t),d=setTimeout(function(){_("timeout"),l.close(),T("ETIMEDOUT","Connection timeout")},w.connectionTimeout),_("bypass properties");for(var r in l)["addEventListener","removeEventListener","close","send"].indexOf(r)<0&&c(l,a,r);l.addEventListener("open",function(){clearTimeout(d),_("open"),p=u(w),_("reconnectDelay:",p),m=0}),l.addEventListener("close",b),f(l,e,y),l.onclose=l.onclose||v,v=null}};_("init"),g(),this.close=function(e,n,t){void 0===e&&(e=1e3),void 0===n&&(n="");var o=void 0===t?{}:t,r=o.keepClosed,i=void 0!==r&&r,c=o.fastClose,u=void 0===c||c,s=o.delay,a=void 0===s?0:s;if(_("close - params:",{reason:n,keepClosed:i,fastClose:u,delay:a,retriesCount:m,maxRetries:w.maxRetries}),h=!i&&m<=w.maxRetries,a&&(p=a),l.close(e,n),u){var f={code:e,reason:n,wasClean:!0};b(),l.removeEventListener("close",b),Array.isArray(y.close)&&y.close.forEach(function(e){var n=e[0],t=e[1];n(f),l.removeEventListener("close",n,t)}),l.onclose&&(v=l.onclose,l.onclose(f),l.onclose=null)}},this.send=function(e){l.send(e)},this.addEventListener=function(e,n,t){Array.isArray(y[e])?y[e].some(function(e){return e[0]===n})||y[e].push([n,t]):y[e]=[[n,t]],l.addEventListener(e,n,t)},this.removeEventListener=function(e,n,t){Array.isArray(y[e])&&(y[e]=y[e].filter(function(e){return e[0]!==n})),l.removeEventListener(e,n,t)}};e.exports=l}])});